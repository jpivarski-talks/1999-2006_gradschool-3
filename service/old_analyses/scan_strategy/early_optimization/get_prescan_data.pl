#!/usr/local/bin/perl

die "Get on a SunOS!\n" if ( `uname` ne "SunOS\n" );

#  # for the Y(3s)
#   @runs = ( 120790, 120791, 120792, 120794, 120795, 120798, 120799, 120800,
#   	  120801, 120802, 120803, 120805, 120806, 120809, 120810, 120811,
#   	  120812, 120813, 120814, 120815, 120816, 120817, 120818, 120819,
#   	  120820, 120821, 120822, 120823, 120824, 120825, 120826, 120827,
#   	  120828, 120829, 120830, 120831, 120833, 120834, 120835, 120888,
#   	  120889, 120890, 120891, 120892, 120893, 120911, 120915, 120919,
#   	  120924, 120926, 120939, 120940, 120943, 120944, 120951, 120954,
#   	  120955, 120956, 120961, 120962, 120964, 120965, 120966, 120967,
#   	  120970, 120972, 120973, 120975, 120976 );

#  # for the Y(1s)
#  @runs = ( 121067, 121070, 121071, 121073, 121124, 121126, 121128, 121129,
#  	  121130, 121131, 121132, 121133, 121134, 121166, 121167, 121170,
#  	  121171, 121172, 121174, 121175, 121178, 121181, 121184, 121185,
#  	  121186, 121187, 121190, 121191, 121192, 121193, 121194, 121197,
#  	  121198, 121199, 121200, 121202, 121203, 121204, 121205, 121206,
#  	  121207, 121208, 121210, 121211, 121212, 121213 );

# for the Y(3s) first real scan

#  @runs = ( 121887, 121889, 121890, 121891, 121892, 121895, 121897, 121898,

#  	  121899, 121901, 121902, 121903, 121904, 121905, 121906, 121909,
#  	  121911, 121912, 121914, 121915,

#  	  121916, 121917, 121918, 121920, 121924, 121925, 121927, 121928,
#  	  121929 );

# @runs = ( 121534..122179 );

# @runs = ( 122245..122249, 122251..122253, 122256, 122263, 122264, 122268, 122269, 122272..122292 );

@runs = ( 122064, 122066, 122079..122083, 122085, 122090..122094,
          122097..122099, 122101, 122102, 122104, 122105, 122109 );

@runs = ( 120790..123149 );

# print "{\n";
foreach $run ( @runs )
{
#     warn "$run\n";

    $date = "na";
    $energy = "na";
    $cchad = "na";
    $cchaderr = "na";
    $barrellumi = "na";
    $barrellumierr = "na";

    open( CONST4, "/nfs/cleo3/Common/rel/current/bin/sparc-sun-solaris2.6/DBRunStatisticsRetrieve $run 4 |" );
    while( <CONST4> )
    {
	$date = $1 if ( $_ =~ /^Created on E[SD]T: ([0-9]+\/[0-9]+\/[0-9]+\s+[0-9]+:[0-9 ]+)/ );

	$energy = $1 if ( $_ =~ /^CESR\/energy:\s+([0-9\.\-]+)/ );
    }
    close( CONST4 );

    open( CONST128, "/nfs/cleo3/Common/rel/current/bin/sparc-sun-solaris2.6/DBRunStatisticsRetrieve $run 128 |" );
    while( <CONST128> )
    {
	( $cchad, $cchaderr ) = ( $1, $2 )
	    if ( /CC Hadronic XC \(nb\):\s+\(length\s+[0-9]+\)\s+([0-9\.\-eE\+]+)\s+([0-9\.\-eE\+]+)/ );

	( $barrellumi, $barrellumierr ) = ( $1, $2 )
	    if ( /Barrel Bhabha Luminosity\s+\(nb\*\*\-1\)\:\s+\(length\s+[0-9]+\)\s+([0-9\.\-\+eE]+)\s+([0-9\.\-\+eE]+)/ );
    }
    close( CONST128 );

    print "$run $date $energy $barrellumi $barrellumierr $cchad $cchaderr\n"
	if ( $energy ne "na"   &&  $energy != 0 );

#    print "{ $run, $energy, $cchad, $cchaderr },\n"
#  	if ( $energy ne "na"   &&  $barrellumi ne "na"   &&  $barrellumierr ne "na"   &&  $cchad ne "na"   &&  $cchaderr ne "na"  &&
#  	     $energy != 0      &&  $barrellumi != 0      &&  $barrellumierr != 0      &&  $cchad != 0      &&  $cchaderr != 0 );

}
# print " }\n";
